<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é–å½¤ç”Ÿæ—¥ç¶²é </title>
    <link href="https://fonts.googleapis.com/css2?family=Pacifico&family=Bangers&display=swap" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css2?family=Great+Vibes&display=swap" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css2?family=Cinzel&display=swap" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css2?family=Sacramento&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles_happybirthday.css">
</head>
<body>
	
	<img src="IMG/brachiosaurus.png" alt="Brachiosaurus" id="brachiosaurus-right" class="dino">
	<img src="IMG/brachiosaurus.png" alt="Brachiosaurus" id="brachiosaurus-left" class="dino">


	<div id="dialog" class="dialog hidden">
		<div class="dialog-content">
			<span class="close">&times;</span>
			<p class="greeting">å—¨ï¼æˆ‘æ˜¯ <span class="brachio">Brachio</span>ï¼Œ</p>
			<p class="birthday-message"> <span class="birthday-name">é–å½¤</span> ç”Ÿæ—¥å¿«æ¨‚ï¼</p>
		</div>
	</div>


    <header>
        <h1>
            <span class="name">ğŸˆ é–å½¤ </span>
            <span class="celebration">ç”Ÿæ—¥å¿«æ¨‚ ğŸˆ</span>
        </h1>       
    </header>   
    
    <main>
			<!-- æ·»åŠ æ»šåŠ¨çš„å›¾ç‰‡ -->
		<div class="animation-container">
			<img src="IMG/volleyball_kuroo.png" alt="æ»šåŠ¨å›¾ç‰‡" class="animate" id="movingImage1">
			<img src="IMG/volleyball_kenma.png" alt="æ»šåŠ¨å›¾ç‰‡" class="animate" id="movingImage2">
			<img src="IMG/volleyball_shoyo.png" alt="æ»šåŠ¨å›¾ç‰‡" class="animate" id="movingImage3">
			<img src="IMG/volleyball_kageyama.png" alt="æ»šåŠ¨å›¾ç‰‡" class="animate" id="movingImage4">
			<img src="IMG/volleyball_ushijima.png" alt="æ»šåŠ¨å›¾ç‰‡" class="animate" id="movingImage5">
			<img src="IMG/volleyball_goshiki.png" alt="æ»šåŠ¨å›¾ç‰‡" class="animate" id="movingImage6">
		</div>
            <section id="cake-section">
                <img src="IMG/birthdaycake.jpg" alt="ç”Ÿæ—¥è›‹ç³•" class="cake" loading="lazy" />
                <div class="candles">
                    <img src="IMG/candle_unburn.png" alt="æœªé»ç‡ƒçš„è Ÿç‡­" class="candle" />
                    <img src="IMG/candle_unburn.png" alt="æœªé»ç‡ƒçš„è Ÿç‡­" class="candle" />
                    <img src="IMG/candle_unburn.png" alt="æœªé»ç‡ƒçš„è Ÿç‡­" class="candle" />
                </div>
                <div class="wish-container"> 
                    <button id="wish-button" class="hidden">è¨±é¡˜</button>
                    <div id="wish-message" class="hidden">è«‹è¨±ä¸‹ä»Šå¹´çš„å¿ƒé¡˜</div>
                </div>
            </section>


			<section id="birthday-flower-section">
				<div id="card-container" class="card-container">
					<div id="card" class="card">
						<div class="card-back">
							<p>ç”Ÿæ—¥èŠ±</p>
							<img src="IMG/talocard.png" alt="å¡èƒŒ" class="card-image-back">
						</div>
						<div class="card-front">
							<p>æ¯å€‹äººå‡ºç”Ÿé‚£å¤©</p>
							<p>éƒ½æœ‰ä¸€æœµèŠ±ç‚ºä»–ç››é–‹</p>
							<img src="IMG/1208card.png" alt="å¡æ­£" class="card-image-front">                                 
						</div>
					</div>
				</div>
			</section>


            <section id="input-section">
                <label for="hint-input">è«‹è¼¸å…¥å‰å¹¾å¤©æ”¶é›†åˆ°çš„æç¤ºï¼š</label>
                <input type="text" id="hint-input" placeholder="è¼¸å…¥æç¤ºå­—" aria-label="æç¤ºå­—è¼¸å…¥æ¡†">
                <button id="confirm-button">ç¢ºèª</button>
                <div id="result-message" class="hidden" aria-live="polite"></div>
                <img id="qr-code" class="hidden" src="IMG/RickRoll.jpg" alt="QR Code" loading="lazy" />
            </section>
            
            <div id="fireworks-container" class="hidden"></div>
            <div id="speech-bubble-container" ></div>

    </main>





    <footer>
        <p>Â© æ­å°¼æ­ç‰ˆæ¬Šå¤§æ¦‚å§</p>
    </footer>

    <script>	
const images = [
    ['movingImage1', 'movingImage2', ], // ç¬¬ä¸€ç»„
    ['movingImage3', 'movingImage4', ], // ç¬¬äºŒç»„
	['movingImage5', 'movingImage6', ], // ç¬¬ä¸‰ç»„
];

const occupiedPositions = new Set(); // ä½¿ç”¨ Set æ¥å­˜å‚¨å·²å ç”¨çš„ä½ç½®

function setRandomVerticalPosition(imageId) {
    const image = document.getElementById(imageId);
    const imageHeight = 200; // å‡è®¾å›¾ç‰‡çš„é«˜åº¦æ˜¯200px
    let randomPosition;

    // éšæœºç”Ÿæˆä¸€ä¸ªåœ¨è§†å£é«˜åº¦èŒƒå›´å†…çš„å‚ç›´ä½ç½®
    do {
        randomPosition = Math.random() * (window.innerHeight - imageHeight);
    } while (Array.from(occupiedPositions).some(pos => Math.abs(pos - randomPosition) < imageHeight));

    image.style.top = randomPosition + 'px'; // è®¾ç½®å›¾ç‰‡çš„é¡¶éƒ¨ä½ç½®
    occupiedPositions.add(randomPosition); // å°†æ–°ä½ç½®æ·»åŠ åˆ°å·²å ç”¨ä½ç½®é›†åˆ
    console.log(`éšæœºä½ç½® for ${imageId}: ${randomPosition}px`); // è¾“å‡ºéšæœºä½ç½®
}

// æ›´æ–°ä¸€ç»„å›¾åƒçš„ä½ç½®
function updateImagePositions(imageGroup) {
    const currentOccupiedPositions = new Set(occupiedPositions); // å¤åˆ¶å½“å‰å·²å ç”¨çš„ä½ç½®

    imageGroup.forEach(imageId => {
        setRandomVerticalPosition(imageId);
    });

    // ç¡®ä¿æ–°ä½ç½®ä¸ä¸å…¶ä»–ç»„é‡å 
    occupiedPositions.clear(); // æ¸…ç©ºä¹‹å‰çš„å ç”¨ä½ç½®
    currentOccupiedPositions.forEach(pos => occupiedPositions.add(pos)); // æ¢å¤ä¹‹å‰çš„ä½ç½®
}

// åˆå§‹è®¾ç½®ï¼Œç¡®ä¿ç¬¬ä¸€è½®ä¸é‡å 
images.forEach(imageGroup => {
    updateImagePositions(imageGroup);
});

// æ¯éš”4ç§’æ›´æ–°å‰ä¸¤ç»„çš„ä½ç½®
setInterval(() => {
    occupiedPositions.clear(); // æ¸…ç©ºæ‰€æœ‰å ç”¨ä½ç½®
    updateImagePositions(images[0]); // æ›´æ–°ç¬¬ä¸€ç»„
	updateImagePositions(images[1]); // æ›´æ–°ç¬¬äºŒç»„ 
}, 4000); // 4000æ¯«ç§’ = 4ç§’

// æ¯éš”4ç§’æ›´æ–°å‰ä¸¤ç»„çš„ä½ç½®
setInterval(() => {
    occupiedPositions.clear(); // æ¸…ç©ºæ‰€æœ‰å ç”¨ä½ç½®
    updateImagePositions(images[2]); // æ›´æ–°ç¬¬ä¸‰ç»„
}, 6000); // 4000æ¯«ç§’ = 4ç§’





	
	
	
        const confirmButton = document.getElementById('confirm-button');
        const hintInput = document.getElementById('hint-input');
        const resultMessage = document.getElementById('result-message');
        let litCandles = 0; // ç´€éŒ„å·²é»äº®çš„è Ÿç‡­æ•¸é‡

        confirmButton.addEventListener('click', function() {
            const userInput = hintInput.value.trim().toLowerCase();
            if (userInput === 'regalo') {
                resultMessage.textContent = 'æ­£ç¢ºï¼è«‹æˆªåœ–å…Œæ›ç¦®ç‰©æˆ–æ˜¯æƒQRç¢¼';
                resultMessage.className = 'success'; // é¡¯ç¤ºæˆåŠŸæ¨£å¼
                document.getElementById('qr-code').classList.remove('hidden'); // é¡¯ç¤ºQRç¢¼
            } else {
                resultMessage.textContent = 'éŒ¯èª¤ï¼è«‹å†è©¦ä¸€æ¬¡ã€‚';
                resultMessage.className = 'error'; // é¡¯ç¤ºéŒ¯èª¤æ¨£å¼
                document.getElementById('qr-code').classList.add('hidden'); // éš±è—QRç¢¼
            }
            resultMessage.classList.remove('hidden');
            hintInput.value = ''; // æ¸…ç©ºè¼¸å…¥æ¡†
        });

        // ä½¿ç”¨äº‹ä»¶å§”æ´¾ï¼Œç¶å®šåˆ°çˆ¶å…ƒç´ 
        document.querySelector('.candles').addEventListener('mouseover', function(e) {
            if (e.target.classList.contains('candle')) {
                lightCandle(e.target);
            }
        });

        function lightCandle(candle) {
            if (candle.src.includes('candle_unburn.png')) {
                candle.src = 'IMG/candle.png'; // æ›´æ›ç‚ºé»ç‡ƒçš„è Ÿç‡­åœ–ç‰‡
                litCandles++;
                if (litCandles === 3) { // ç•¶æ‰€æœ‰è Ÿç‡­é»äº®æ™‚ï¼Œé¡¯ç¤ºè¨±é¡˜æŒ‰éˆ•
                    document.getElementById('wish-button').classList.remove('hidden');
                    // èª¿æ•´æç¤ºå€åŸŸçš„ä½ç½®
                    document.getElementById('input-section').style.marginTop = '50px'; // å¯ä»¥æ ¹æ“šéœ€è¦èª¿æ•´
                }
            }
        }

        document.getElementById("wish-button").addEventListener("click", () => {
            makeWish();
            document.getElementById("fireworks-container").classList.remove("hidden");
            createFireworks();
            createSpeechBubble(); // ç”Ÿæˆå°è©±æ¡†
        });

        function makeWish() {
            // é»ä¸‹è¨±é¡˜æŒ‰éˆ•å¾Œé¡¯ç¤ºè¨Šæ¯ï¼Œä¸¦åœ¨10ç§’å¾Œç†„æ»…è Ÿç‡­
            document.getElementById('wish-message').classList.remove('hidden');
            setTimeout(extinguishCandles, 10000); // 10ç§’å¾Œç†„æ»…è Ÿç‡­
        }

        function extinguishCandles() {
            const candles = document.querySelectorAll('.candle');
            candles.forEach(candle => {
                candle.src = 'IMG/candle_unburn.png'; // æ›´æ›å›æœªé»ç‡ƒçš„è Ÿç‡­åœ–ç‰‡
            });
            // éš±è—è¨±é¡˜æŒ‰éˆ•å’Œè¨Šæ¯ï¼Œé‡ç½®å·²é»äº®çš„è Ÿç‡­æ•¸é‡
            document.getElementById('wish-button').classList.add('hidden');
            document.getElementById('wish-message').classList.add('hidden');
            litCandles = 0;
            document.getElementById('input-section').style.marginTop = '0'; // é‡ç½® margin
        }

        function createFireworks() {
            const container = document.getElementById("fireworks-container");

            // ç…™ç«æ•ˆæœç”Ÿæˆ
            for (let i = 0; i < 30; i++) { // å¯ä»¥èª¿æ•´ç…™ç«çš„é¡†æ•¸
                const firework = document.createElement("div");
                firework.classList.add("firework");

                // éš¨æ©Ÿä½ç½®
                const x = Math.random() * window.innerWidth;
                const y = Math.random() * window.innerHeight;

                // éš¨æ©Ÿé¡è‰²å’Œå¤§å°
                const size = Math.random() * 20 + 10; // å¤§å°ç¯„åœï¼š10px åˆ° 30px
                const color = `hsl(${Math.random() * 360}, 100%, 50%)`;
                
                firework.style.left = `${x}px`;
                firework.style.top = `${y}px`;
                firework.style.width = `${size}px`;
                firework.style.height = `${size}px`;
                firework.style.backgroundColor = color;
                
                container.appendChild(firework);

                // å‹•ç•«æ™‚é–“éš¨æ©ŸåŒ–
                firework.style.animationDuration = `${Math.random() * 1 + 0.5}s`; // æ™‚é–“ç¯„åœï¼š0.5s åˆ° 1.5s

                // å‹•ç•«çµæŸå¾Œç§»é™¤å…ƒç´ 
                firework.addEventListener("animationend", () => {
                    firework.remove();
                });
            }

            // 5 ç§’å¾Œéš±è—ç…™ç«å®¹å™¨
            setTimeout(() => {
                container.classList.add("hidden");
            }, 2000);
        }
		
		
		
const card = document.getElementById('card');

card.addEventListener('click', function () {
    // åˆ‡æ›ç¿»è½‰æ•ˆæœ
    this.classList.toggle('flipped');
});


window.addEventListener('load', () => {
    createSpeechBubble(); // é é¢åŠ è¼‰å¾Œè‡ªå‹•ç”Ÿæˆå°è©±æ¡†
});

function createSpeechBubble() {
    const container = document.getElementById("speech-bubble-container");
    const phrases = ["Boom!", "ç”Ÿæ—¥å¿«æ¨‚!", "ìƒì¼ì¶•í•˜í•©ë‹ˆë‹¤!", "Happy Birthday!", "ãŠèª•ç”Ÿæ—¥ãŠã‚ã§ã¨", "Surprise!"];
    
    const interval = setInterval(() => {
        const bubble = document.createElement("div");
        bubble.classList.add("speech-bubble");

        // éš¨æ©Ÿé¸æ“‡å°è©±æ¡†å…§å®¹
        const phrase = phrases[Math.floor(Math.random() * phrases.length)];
        bubble.textContent = phrase;

        // éš¨æ©Ÿé¸æ“‡å°è©±æ¡†å‡ºç¾çš„å´é‚Š
        const side = Math.random() < 0.5 ? 'left' : 'right';
        const x = side === 'left' ? Math.random() * (window.innerWidth / 2) : Math.random() * (window.innerWidth / 2) + (window.innerWidth / 2);
        const y = Math.random() * (window.innerHeight - 100); // ç¢ºä¿ä¸è¶…å‡ºè¦–çª—
        bubble.style.left = `${x}px`;
        bubble.style.top = `${y}px`;

        container.appendChild(bubble);

        // å‹•ç•«çµæŸå¾Œç§»é™¤å°è©±æ¡†
        bubble.addEventListener("animationend", () => {
            bubble.remove();
        });

        // æ¯å€‹å°è©±æ¡†æŒçºŒ4ç§’
        setTimeout(() => {
            bubble.remove();
        }, 4000);

    }, 800); // æ¯ 0.8 ç§’ç”Ÿæˆä¸€å€‹æ–°çš„å°è©±æ¡†

    // åœæ­¢ç”Ÿæˆå°è©±æ¡†çš„æ¢ä»¶ï¼Œå¯ä»¥æ ¹æ“šéœ€è¦é€²è¡Œè¨­ç½®
    setTimeout(() => {
        clearInterval(interval);
    }, 20000); // 20ç§’å¾Œåœæ­¢ç”Ÿæˆå°è©±æ¡†
}

// ç²å–å…ƒç´ 
const dinoRight = document.getElementById('brachiosaurus-right');
const dinoLeft = document.getElementById('brachiosaurus-left');
const dialog = document.getElementById('dialog');
const closeButton = document.querySelector('.close');

// é»æ“Šäº‹ä»¶
[dinoRight, dinoLeft].forEach(dino => {
    dino.addEventListener('click', function() {
        dialog.classList.remove('hidden'); // é¡¯ç¤ºå°è©±æ¡†
    });
});

// é—œé–‰å°è©±æ¡†
closeButton.addEventListener('click', function() {
    dialog.classList.add('hidden'); // éš±è—å°è©±æ¡†
});

// é»æ“Šå°è©±æ¡†å¤–éƒ¨é—œé–‰
dialog.addEventListener('click', function(e) {
    if (e.target === dialog) {
        dialog.classList.add('hidden'); // éš±è—å°è©±æ¡†
    }
});

// è‡ªå‹•é—œé–‰å°è©±æ¡†
setTimeout(() => {
    dialog.classList.add('hidden');
}, 5000); // 5 ç§’å¾Œè‡ªå‹•é—œé–‰å°è©±æ¡†


// é»æ“Šäº‹ä»¶
[dinoRight, dinoLeft].forEach(dino => {
    dino.addEventListener('click', function() {
        dialog.classList.add('visible'); // é¡¯ç¤ºå°è©±æ¡†
        dialog.classList.remove('hidden'); // ç¡®ä¿å®ƒä¸è¢«éšè—
    });
});

// é—œé–‰å°è©±æ¡†
closeButton.addEventListener('click', function() {
    dialog.classList.remove('visible'); // éšè—å¯¹è¯æ¡†
    setTimeout(() => {
        dialog.classList.add('hidden'); // ç­‰å¾…åŠ¨ç”»ç»“æŸåéšè—
    }, 300); // ç­‰å¾…æ—¶é—´ä¸ CSS åŠ¨ç”»æ—¶é—´ç›¸åŒ¹é…
});


    </script>
</body>
</html>
