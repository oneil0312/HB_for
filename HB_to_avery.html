<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é–å½¤ç”Ÿæ—¥ç¶²é </title>
    <link href="https://fonts.googleapis.com/css2?family=Pacifico&family=Bangers&display=swap" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css2?family=Great+Vibes&display=swap" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css2?family=Cinzel&display=swap" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css2?family=Sacramento&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles_happybirthday.css">
</head>
<body>
	
	<img src="IMG/brachiosaurus.png" alt="Brachiosaurus" id="brachiosaurus-right" class="dino">
	<img src="IMG/brachiosaurus.png" alt="Brachiosaurus" id="brachiosaurus-left" class="dino">


	<div id="dialog" class="dialog hidden">
		<div class="dialog-content">
			<span class="close">&times;</span>
			<p class="greeting">å—¨ï¼æˆ‘æ˜¯ <span class="brachio">Brachio</span>ï¼Œ</p>
			<p class="birthday-message"> <span class="birthday-name">é–å½¤</span> ç”Ÿæ—¥å¿«æ¨‚ï¼</p>
		</div>
	</div>


    <header>
        <h1>
            <span class="name">ğŸˆ é–å½¤ </span>
            <span class="celebration">ç”Ÿæ—¥å¿«æ¨‚ ğŸˆ</span>
        </h1>       
    </header>   
    
    <main>
			<!-- æ·»åŠ æ»šåŠ¨çš„å›¾ç‰‡ -->
		<div class="animation-container">
			<img src="IMG/volleyball_kuroo.png" alt="æ»šåŠ¨å›¾ç‰‡" class="animate" id="movingImage1">
			<img src="IMG/volleyball_kenma.png" alt="æ»šåŠ¨å›¾ç‰‡" class="animate" id="movingImage2">
			<img src="IMG/volleyball_shoyo.png" alt="æ»šåŠ¨å›¾ç‰‡" class="animate" id="movingImage3">
			<img src="IMG/volleyball_kageyama.png" alt="æ»šåŠ¨å›¾ç‰‡" class="animate" id="movingImage4">
			<img src="IMG/volleyball_ushijima.png" alt="æ»šåŠ¨å›¾ç‰‡" class="animate" id="movingImage5">
			<img src="IMG/volleyball_goshiki.png" alt="æ»šåŠ¨å›¾ç‰‡" class="animate" id="movingImage6">
			<img src="IMG/volleyball_osamu.png" alt="æ»šåŠ¨å›¾ç‰‡" class="animate" id="movingImage7">
			<img src="IMG/volleyball_suna.png" alt="æ»šåŠ¨å›¾ç‰‡" class="animate" id="movingImage8">
			<img src="IMG/volleyball_atsuma.png" alt="æ»šåŠ¨å›¾ç‰‡" class="animate" id="movingImage9">
			<img src="IMG/volleyball_kita.png" alt="æ»šåŠ¨å›¾ç‰‡" class="animate" id="movingImage10">
			<img src="IMG/volleyball_yaku.png" alt="æ»šåŠ¨å›¾ç‰‡" class="animate" id="movingImage11">
			<img src="IMG/volleyball_nishinoya.png" alt="æ»šåŠ¨å›¾ç‰‡" class="animate" id="movingImage12">
			<img src="IMG/volleyball_aone.png" alt="æ»šåŠ¨å›¾ç‰‡" class="animate" id="movingImage13">
			<img src="IMG/volleyball_Koganegawa.png" alt="æ»šåŠ¨å›¾ç‰‡" class="animate" id="movingImage14">
			<img src="IMG/volleyball_asahi.png" alt="æ»šåŠ¨å›¾ç‰‡" class="animate" id="movingImage15">
			<img src="IMG/volleyball_atsuma.png" alt="æ»šåŠ¨å›¾ç‰‡" class="animate" id="movingImage16">
			<img src="IMG/volleyball_bokuto.png" alt="æ»šåŠ¨å›¾ç‰‡" class="animate" id="movingImage17">
			<img src="IMG/volleyball_oikawa.png" alt="æ»šåŠ¨å›¾ç‰‡" class="animate" id="movingImage18">			
		</div>
			 <section id="cake-section">
					<div id="sky-lantern-container"></div>
					<img src="IMG/birthday_cake.jpg" alt="ç”Ÿæ—¥è›‹ç³•" class="cake" />
					<div class="candles">
						<img src="IMG/candle_unburn.png" alt="æœªé»ç‡ƒçš„è Ÿç‡­" class="candle" />
						<img src="IMG/candle_unburn.png" alt="æœªé»ç‡ƒçš„è Ÿç‡­" class="candle" />
						<img src="IMG/candle_unburn.png" alt="æœªé»ç‡ƒçš„è Ÿç‡­" class="candle" />
					</div>
					<div class="wish-container">
						<button id="wish-button" class="hidden">è¨±é¡˜</button>
						<div id="wish-message" class="hidden">è«‹è¨±ä¸‹ä»Šå¹´çš„å¿ƒé¡˜</div>
					</div>
				</section>

            <section id="input-section">
                <label for="hint-input">è«‹è¼¸å…¥å‰å¹¾å¤©æ”¶é›†åˆ°çš„æç¤ºï¼š</label>
                <input type="text" id="hint-input" placeholder="è¼¸å…¥æç¤ºå­—" aria-label="æç¤ºå­—è¼¸å…¥æ¡†">
                <button id="confirm-button">ç¢ºèª</button>
                <div id="result-message" class="hidden" aria-live="polite"></div>
                <img id="qr-code" class="hidden" src="IMG/RickRoll.jpg" alt="QR Code" loading="lazy" />
            </section>
            
            <div id="fireworks-container" class="hidden"></div>
            <div id="speech-bubble-container" ></div>
			

    </main>





    <footer>
        <p>Â© æ­å°¼æ­ç‰ˆæ¬Šå¤§æ¦‚å§</p>
    </footer>

    <script>	
// æ‰€æœ‰å›¾ç‰‡çš„ ID
const allImages = [
    'movingImage1', 'movingImage2', 'movingImage3', 'movingImage4', 'movingImage5', 
    'movingImage6', 'movingImage7', 'movingImage8', 'movingImage9', 'movingImage10', 
    'movingImage11', 'movingImage12', 'movingImage13', 'movingImage14', 'movingImage15', 
    'movingImage16', 'movingImage17', 'movingImage18'
];

// å®šä¹‰å…¨å±€å˜é‡
let images = []; // å½“å‰çš„å›¾ç‰‡ç»„
const occupiedPositionsGroup = [
    new Set(), // ç¬¬ä¸€ç»„çš„å ä½
    new Set()  // ç¬¬äºŒç»„çš„å ä½
];

// éšæœºé€‰æ‹©å››å¼ å›¾ç‰‡çš„å‡½æ•°
function getRandomImages(images, num) {
    const selectedImages = [];
    const imageSet = new Set();

    while (imageSet.size < num) {
        const randomIndex = Math.floor(Math.random() * images.length);
        imageSet.add(images[randomIndex]);
    }
    return Array.from(imageSet);
}

// æ›´æ–°æ˜¾ç¤ºçš„å›¾ç‰‡
function updateDisplayedImages() {
    // éšæœºé€‰æ‹©å››å¼ å›¾ç‰‡
    const selectedImages = getRandomImages(allImages, 4);
    selectedImages.forEach(imageId => {
        const image = document.getElementById(imageId);
        if (image) image.style.display = 'block'; // æ˜¾ç¤ºé€‰ä¸­çš„å›¾ç‰‡
    });

    allImages.forEach(imageId => {
        if (!selectedImages.includes(imageId)) {
            const image = document.getElementById(imageId);
            if (image) image.style.display = 'none'; // éšè—æœªé€‰ä¸­çš„å›¾ç‰‡
        }
    });

    images = [ // ä½¿ç”¨å…¨å±€å˜é‡
        [selectedImages[0], selectedImages[1]], // ç¬¬ä¸€ç»„
        [selectedImages[2], selectedImages[3]]  // ç¬¬äºŒç»„
    ];

    images.forEach((imageGroup, index) => {
        const groupClass = `group${index + 1}`;
        imageGroup.forEach(imageId => {
            const image = document.getElementById(imageId);
            if (image) image.classList.add('animate', groupClass);
        });
    });

    images.forEach((imageGroup, index) => {
        updateImagePositions(imageGroup, occupiedPositionsGroup[index]);
    });
}

// éšæœºè®¾ç½®å›¾ç‰‡çš„å‚ç›´ä½ç½®
function setRandomVerticalPosition(imageId, occupiedPositions) {
    const image = document.getElementById(imageId);
    const imageHeight = 300; // å‡è®¾å›¾ç‰‡çš„é«˜åº¦æ˜¯300px
    let randomPosition;

    // ä¿®æ”¹è¿™é‡Œçš„èŒƒå›´ï¼Œä»¥å…è®¸æ›´å¤§çš„å‚ç›´ä½ç½®ç”Ÿæˆ
    const maxPosition = window.innerHeight - imageHeight; // æœ€å¤§ä½ç½®
    const minPosition = 50; // æœ€å°ä½ç½®ï¼Œå‘ä¸‹ç§»åŠ¨çš„åŸºå‡†å€¼ï¼Œå¯ä»¥æ ¹æ®éœ€è¦è¿›è¡Œè°ƒæ•´

    do {
        // ç”Ÿæˆçš„éšæœºä½ç½®èŒƒå›´æ‰©å¤§è‡³æ•´ä¸ªè§†å£åŠ ä¸Šå›¾ç‰‡é«˜åº¦
        randomPosition = Math.random() * (maxPosition - minPosition) + minPosition;
    } while (Array.from(occupiedPositions).some(pos => Math.abs(pos - randomPosition) < imageHeight));

    image.style.top = randomPosition + 'px'; // è®¾ç½®å›¾ç‰‡çš„é¡¶éƒ¨ä½ç½®
    occupiedPositions.add(randomPosition); // å°†æ–°ä½ç½®æ·»åŠ åˆ°å·²å ç”¨ä½ç½®é›†åˆ
}

// æ›´æ–°ä¸€ç»„å›¾åƒçš„ä½ç½®
function updateImagePositions(imageGroup, occupiedPositions) {
    occupiedPositions.clear(); // æ¸…ç©ºå½“å‰ç»„çš„å ç”¨ä½ç½®

    imageGroup.forEach(imageId => {
        setRandomVerticalPosition(imageId, occupiedPositions);
    });

    console.log(`å½“å‰ç»„çš„å‚ç›´ä½ç½®:`, Array.from(occupiedPositions)); // è¾“å‡ºå½“å‰ç»„çš„å‚ç›´ä½ç½®
}

// åˆå§‹è®¾ç½®
updateDisplayedImages(); // ç”Ÿæˆåˆå§‹çš„å›¾åƒç»„å¹¶æ›´æ–°ä½ç½®

// å®šæ—¶å™¨æ›´æ–°ä½ç½®
setInterval(() => {
    // æ›´æ–°ç¬¬ä¸€ç»„çš„ä½ç½®
    updateImagePositions(images[0], occupiedPositionsGroup[0]); // æ›´æ–°ç¬¬ä¸€ç»„
}, 4000); // 4000 æ¯«ç§’ = 4 ç§’

setInterval(() => {
    // æ›´æ–°ç¬¬äºŒç»„çš„ä½ç½®
    updateImagePositions(images[1], occupiedPositionsGroup[1]); // æ›´æ–°ç¬¬äºŒç»„
}, 6000); // 6000 æ¯«ç§’ = 6 ç§’

// æ¯éš” 12 ç§’æ›´æ–°æ˜¾ç¤ºçš„å…­å¼ å›¾ç‰‡
setInterval(() => {
    updateDisplayedImages();
}, 12000); // 12000 æ¯«ç§’ = 12 ç§’




	
	
	const confirmButton = document.getElementById('confirm-button');
	const hintInput = document.getElementById('hint-input');
	const resultMessage = document.getElementById('result-message');

	confirmButton.addEventListener('click', function() {
		const userInput = hintInput.value.trim().toLowerCase();
		resultMessage.classList.remove('success', 'error', 'hidden'); // é‡ç½®ç‹€æ…‹

		if (userInput === 'regalo') {
			resultMessage.textContent = 'æ­£ç¢ºï¼è«‹æˆªåœ–å…Œæ›ç¦®ç‰©æˆ–æ˜¯æƒQRç¢¼';
			resultMessage.classList.add('success'); // é¡¯ç¤ºæˆåŠŸæ¨£å¼
			document.getElementById('qr-code').classList.remove('hidden'); // é¡¯ç¤ºQRç¢¼
		} else {
			resultMessage.textContent = 'éŒ¯èª¤ï¼è«‹å†è©¦ä¸€æ¬¡ã€‚';
			resultMessage.classList.add('error'); // é¡¯ç¤ºéŒ¯èª¤æ¨£å¼
			document.getElementById('qr-code').classList.add('hidden'); // éš±è—QRç¢¼

			// éŒ¯èª¤æ™‚æ·»åŠ æ™ƒå‹•æ•ˆæœ
			document.body.classList.add('shake');
			setTimeout(() => document.body.classList.remove('shake'), 500); // 0.5ç§’å¾Œåœæ­¢æ™ƒå‹•
		}

		// é‡æ–°è§¸ç™¼å‹•ç•«
		resultMessage.style.animation = 'none';
		requestAnimationFrame(() => {
			resultMessage.style.animation = ''; // é‡å•Ÿå‹•ç•«
		});
		hintInput.value = ''; // æ¸…ç©ºè¼¸å…¥æ¡†
	});

						
	
	
	

let litCandles = 0; // è®°å½•å·²ç‚¹äº®çš„èœ¡çƒ›æ•°é‡

// ä½¿ç”¨äº‹ä»¶å§”æ‰˜ï¼Œç»‘å®šåˆ°çˆ¶å…ƒç´ 
document.querySelector('.candles').addEventListener('mouseover', function (e) {
    if (e.target.classList.contains('candle')) {
        lightCandle(e.target);
    }
});

function lightCandle(candle) {
    // ç¡®ä¿å›¾ç‰‡è·¯å¾„æ­£ç¡®
    if (candle.src.includes('candle_unburn.png')) {
        candle.src = 'IMG/candle.png'; // æ›´æ¢ä¸ºç‚¹ç‡ƒçš„èœ¡çƒ›å›¾ç‰‡
        litCandles++;

        if (litCandles === 3) { // å½“æ‰€æœ‰èœ¡çƒ›ç‚¹äº®æ—¶ï¼Œæ˜¾ç¤ºè®¸æ„¿æŒ‰é’®
            const wishButton = document.getElementById('wish-button');
            wishButton.classList.remove('hidden');
            wishButton.classList.add('visible'); // ç¡®ä¿æ ·å¼æ”¯æŒ visible ç±»

            // è°ƒæ•´æç¤ºåŒºåŸŸçš„ä½ç½®
            document.getElementById('input-section').style.marginTop = '50px';
        }
    }
}

// è®¸æ„¿é€»è¾‘
document.getElementById("wish-button").addEventListener("click", () => {
    makeWish();
    document.getElementById("fireworks-container").classList.remove("hidden");
    createFireworks();
    createSpeechBubble(); // ç”Ÿæˆå¯¹è¯æ¡†
});

function makeWish() {
    const wishMessage = document.getElementById('wish-message');
    wishMessage.classList.remove('hidden');
    wishMessage.classList.add('visible');

    // 10ç§’åé‡ç½®èœ¡çƒ›å’Œè®¸æ„¿æŒ‰é’®
    setTimeout(() => {
        document.querySelectorAll('.candle').forEach(candle => {
            candle.src = 'IMG/candle_unburn.png'; // é‡ç½®ä¸ºæœªç‚¹ç‡ƒçŠ¶æ€
            candle.classList.remove('lit');
        });
        litCandles = 0; // é‡ç½®è®¡æ•°
        const wishButton = document.getElementById('wish-button');
        wishButton.classList.add('hidden');
        wishButton.classList.remove('visible');
        wishMessage.classList.add('hidden');
        wishMessage.classList.remove('visible');
    }, 10000);
}

// ç¡®ä¿ extinguishCandles å‡½æ•°æ­£å¸¸å·¥ä½œ
function extinguishCandles() {
    const candles = document.querySelectorAll('.candle');
    candles.forEach(candle => {
        candle.src = 'IMG/candle_unburn.png'; // æ›´æ¢å›æœªç‚¹ç‡ƒçš„èœ¡çƒ›å›¾ç‰‡
    });

    // éšè—è®¸æ„¿æŒ‰é’®å’Œæ¶ˆæ¯ï¼Œé‡ç½®å·²ç‚¹äº®çš„èœ¡çƒ›æ•°é‡
    document.getElementById('wish-button').classList.add('hidden');
    document.getElementById('wish-message').classList.add('hidden');
    litCandles = 0;
    document.getElementById('input-section').style.marginTop = '0'; // é‡ç½® margin
}

	
		
		


function createFireworks() {
    const container = document.getElementById("fireworks-container");
    container.classList.remove("hidden");
    
    // æ¸›å°‘åŒæ™‚ç™¼å°„çš„æ•¸é‡ä½†å¢åŠ æŒçºŒæ™‚é–“
    for (let i = 0; i < 6; i++) {
        setTimeout(() => {
            launchFirework(container);
        }, i * 500); // å¢åŠ ç™¼å°„é–“éš”
    }
    
    // å»¶é•·é¡¯ç¤ºæ™‚é–“
    setTimeout(() => {
        container.classList.add("hidden");
    }, 12000);
}

function launchFirework(container) {
    const startX = Math.random() * window.innerWidth;
    const startY = window.innerHeight;
    const targetX = startX + (Math.random() - 0.5) * 300; // å¢åŠ æ°´å¹³æ“´æ•£ç¯„åœ
    const targetY = window.innerHeight * 0.2 + (Math.random() - 0.5) * 150; // å¢åŠ å‚ç›´æ“´æ•£ç¯„åœ
    
    const rocket = document.createElement("div");
    rocket.className = "firework-particle";
    rocket.style.left = `${startX}px`;
    rocket.style.top = `${startY}px`;
    rocket.style.width = "8px";  // åŠ å¤§ç™¼å°„ç«ç®­å¤§å°
    rocket.style.height = "8px";
    rocket.style.backgroundColor = `hsl(${Math.random() * 360}, 100%, 50%)`;
    rocket.style.boxShadow = "0 0 12px 4px white"; // å¢åŠ ç™¼å…‰æ•ˆæœ
    container.appendChild(rocket);
    
    createTrail(container, startX, startY, targetX, targetY);
    
    rocket.style.animation = "launch 1s ease-out forwards";
    
    setTimeout(() => {
        rocket.remove();
        createExplosion(container, targetX, targetY);
    }, 1000);
}
		
function createTrail(container, startX, startY, targetX, targetY) {
    const duration = 1000; // é…åˆç™¼å°„æ™‚é–“
    const interval = 35; // ç•¥å¾®å¢åŠ å°¾è·¡å¯†åº¦
    const steps = duration / interval;
    let step = 0;
    
    const trailInterval = setInterval(() => {
        if (step >= steps) {
            clearInterval(trailInterval);
            return;
        }
        
        const progress = step / steps;
        const x = startX + (targetX - startX) * progress;
        const y = startY + (targetY - startY) * progress;
        
        const trail = document.createElement("div");
        trail.className = "trail";
        trail.style.left = `${x}px`;
        trail.style.top = `${y}px`;
        trail.style.backgroundColor = `hsla(${Math.random() * 360}, 100%, 70%, 0.7)`; // æé«˜é€æ˜åº¦
        trail.style.boxShadow = "0 0 8px 2px rgba(255,255,255,0.5)"; // æ·»åŠ ç™¼å…‰æ•ˆæœ
        container.appendChild(trail);
        
        setTimeout(() => trail.remove(), 800);
        step++;
    }, interval);
}

function createExplosion(container, x, y) {
    const particleCount = 80; // ç•¥å¾®æ¸›å°‘ç²’å­æ•¸é‡ä½†å¢åŠ å¤§å°
    const baseHue = Math.random() * 360;
    
    for (let i = 0; i < particleCount; i++) {
        const particle = document.createElement("div");
        particle.className = "firework-particle";
        
        const hue = (baseHue + Math.random() * 30 - 15) % 360;
        const color = `hsl(${hue}, 100%, ${60 + Math.random() * 20}%)`; // æé«˜äº®åº¦
        
        // åŠ å¤§ç²’å­å°ºå¯¸
        const size = 6 + Math.random() * 8; // ç¯„åœå¾ 6px åˆ° 14px
        
        particle.style.left = `${x}px`;
        particle.style.top = `${y}px`;
        particle.style.width = `${size}px`;
        particle.style.height = `${size}px`;
        particle.style.backgroundColor = color;
        particle.style.boxShadow = `0 0 ${8 + Math.random() * 8}px ${color}`; // åŠ å¤§ç™¼å…‰ç¯„åœ
        
        // èª¿æ•´æ•£å°„ç¯„åœ
        const angle = (Math.PI * 2 * i) / particleCount;
        const velocity = 10 + Math.random() * 8; // å¢åŠ é€Ÿåº¦
        const tx = Math.cos(angle) * velocity * (25 + Math.random() * 15);
        const ty = Math.sin(angle) * velocity * (25 + Math.random() * 15);
        
        particle.style.setProperty('--tx', `${tx}rem`);
        particle.style.setProperty('--ty', `${ty}rem`);
        
        // å»¶é•·å‹•ç•«æ™‚é–“
        particle.style.animation = `particle ${1.5 + Math.random() * 0.5}s ease-out forwards`;
        
        container.appendChild(particle);
        
        particle.addEventListener('animationend', () => {
            particle.remove();
        });
    }
}
		
const card = document.getElementById('card');

card.addEventListener('click', function () {
    // åˆ‡æ›ç¿»è½‰æ•ˆæœ
    this.classList.toggle('flipped');
});


window.addEventListener('load', () => {
    createSpeechBubble(); // é é¢åŠ è¼‰å¾Œè‡ªå‹•ç”Ÿæˆå°è©±æ¡†
});

function createSpeechBubble() {
    const container = document.getElementById("speech-bubble-container");
    const phrases = ["Boom!", "ç”Ÿæ—¥å¿«æ¨‚!", "ìƒì¼ì¶•í•˜í•©ë‹ˆë‹¤!", "Happy Birthday!", "ãŠèª•ç”Ÿæ—¥ãŠã‚ã§ã¨", "Surprise!"];
    
    const interval = setInterval(() => {
        const bubble = document.createElement("div");
        bubble.classList.add("speech-bubble");

        // éš¨æ©Ÿé¸æ“‡å°è©±æ¡†å…§å®¹
        const phrase = phrases[Math.floor(Math.random() * phrases.length)];
        bubble.textContent = phrase;

        // éš¨æ©Ÿé¸æ“‡å°è©±æ¡†å‡ºç¾çš„å´é‚Š
        const side = Math.random() < 0.5 ? 'left' : 'right';
        const x = side === 'left' ? Math.random() * (window.innerWidth / 2) : Math.random() * (window.innerWidth / 2) + (window.innerWidth / 2);
        const y = Math.random() * (window.innerHeight - 100); // ç¢ºä¿ä¸è¶…å‡ºè¦–çª—
        bubble.style.left = `${x}px`;
        bubble.style.top = `${y}px`;

        container.appendChild(bubble);

        // å‹•ç•«çµæŸå¾Œç§»é™¤å°è©±æ¡†
        bubble.addEventListener("animationend", () => {
            bubble.remove();
        });

        // æ¯å€‹å°è©±æ¡†æŒçºŒ4ç§’
        setTimeout(() => {
            bubble.remove();
        }, 4000);

    }, 800); // æ¯ 0.8 ç§’ç”Ÿæˆä¸€å€‹æ–°çš„å°è©±æ¡†

    // åœæ­¢ç”Ÿæˆå°è©±æ¡†çš„æ¢ä»¶ï¼Œå¯ä»¥æ ¹æ“šéœ€è¦é€²è¡Œè¨­ç½®
    setTimeout(() => {
        clearInterval(interval);
    }, 20000); // 20ç§’å¾Œåœæ­¢ç”Ÿæˆå°è©±æ¡†
}

// ç²å–å…ƒç´ 
const dinoRight = document.getElementById('brachiosaurus-right');
const dinoLeft = document.getElementById('brachiosaurus-left');
const dialog = document.getElementById('dialog');
const closeButton = document.querySelector('.close');

// é»æ“Šäº‹ä»¶
[dinoRight, dinoLeft].forEach(dino => {
    dino.addEventListener('click', function() {
        dialog.classList.remove('hidden'); // é¡¯ç¤ºå°è©±æ¡†
    });
});

// é—œé–‰å°è©±æ¡†
closeButton.addEventListener('click', function() {
    dialog.classList.add('hidden'); // éš±è—å°è©±æ¡†
});

// é»æ“Šå°è©±æ¡†å¤–éƒ¨é—œé–‰
dialog.addEventListener('click', function(e) {
    if (e.target === dialog) {
        dialog.classList.add('hidden'); // éš±è—å°è©±æ¡†
    }
});

// è‡ªå‹•é—œé–‰å°è©±æ¡†
setTimeout(() => {
    dialog.classList.add('hidden');
}, 5000); // 5 ç§’å¾Œè‡ªå‹•é—œé–‰å°è©±æ¡†


// é»æ“Šäº‹ä»¶
[dinoRight, dinoLeft].forEach(dino => {
    dino.addEventListener('click', function() {
        dialog.classList.add('visible'); // é¡¯ç¤ºå°è©±æ¡†
        dialog.classList.remove('hidden'); // ç¡®ä¿å®ƒä¸è¢«éšè—
    });
});

// é—œé–‰å°è©±æ¡†
closeButton.addEventListener('click', function() {
    dialog.classList.remove('visible'); // éšè—å¯¹è¯æ¡†
    setTimeout(() => {
        dialog.classList.add('hidden'); // ç­‰å¾…åŠ¨ç”»ç»“æŸåéšè—
    }, 300); // ç­‰å¾…æ—¶é—´ä¸ CSS åŠ¨ç”»æ—¶é—´ç›¸åŒ¹é…
});

const pinganShape = [
    [0 ,1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0], // å¢åŠ æ›´å¤šæ ¼å­ä¾†ç´°åŒ–å½¢ç‹€
    [0 ,0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 0],
    [0 ,0, 0, 1, 0, 1, 0, 1, 0, 0, 0, 0],
    [0 ,0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0],
    [1 ,1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
    [0 ,0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0],
    [0 ,0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0], // åœ¨æ­¤è™•ç´°åŒ–å­—å½¢
    [0 ,0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0], 
    [0 ,0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0], // ä¸Šä¸‹æ›´åŠ å°ç¨±
];

const anShape = [
    [0 ,0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0], // å¢åŠ æ›´å¤šæ ¼å­ä¾†ç´°åŒ–å½¢ç‹€
    [1 ,1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
    [1 ,0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1],
    [1 ,0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 1],
    [0 ,1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0],
    [0 ,0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0],
    [0 ,0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0], // åœ¨æ­¤è™•ç´°åŒ–å­—å½¢
    [0 ,0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0], 
    [0 ,0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0], 
    [0 ,0, 0, 1, 0, 1, 0, 0, 0, 0, 0, 0], 
    [0 ,0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0], // ä¸Šä¸‹æ›´åŠ å°ç¨±
];

const gridSize = 40; // æ¯å€‹å¤©ç‡ˆçš„æ ¼å­å¤§å°
const animationDuration = 4000; // å‹•ç•«æŒçºŒæ™‚é–“ï¼ˆæ¯«ç§’ï¼‰
const displayDuration = 10000; // é¡¯ç¤ºå¤©ç‡ˆçš„æ™‚é–“ï¼ˆæ¯«ç§’ï¼‰

function launchSkyLanterns() {
    const container = document.getElementById("sky-lantern-container");
    container.style.position = "relative";

    // ç²å–è›‹ç³•å…ƒç´ çš„ä½ç½®å’Œå¤§å°
    const cake = document.querySelector(".cake");
    const cakeRect = cake.getBoundingClientRect();

    // è¨ˆç®—ã€Œå¹³ã€å­—å½¢çš„ä½ç½®ï¼Œè®“å…¶å‡ºç¾åœ¨è›‹ç³•å·¦é‚Š
    const pinganOffsetX = cakeRect.left - pinganShape[0].length * gridSize - 200; // è·é›¢è›‹ç³•å·¦å´20px
    const pinganOffsetY = cakeRect.top + (cakeRect.height - pinganShape.length * gridSize) / 2; // å‚ç›´å±…ä¸­
	
	// è¨ˆç®—ã€Œå®‰ã€å­—å½¢çš„ä½ç½®ï¼Œè®“å…¶å‡ºç¾åœ¨è›‹ç³•å³é‚Š
    const anOffsetX = cakeRect.left + cakeRect.width + 200; // è·é›¢è›‹ç³•å³å´200px
    const anOffsetY = cakeRect.top + (cakeRect.height - anShape.length * gridSize) / 2; // å‚ç›´å±…ä¸­

    // å‰µå»ºã€Œå¹³ã€å­—çš„å¤©ç‡ˆ
    pinganShape.forEach((row, rowIndex) => {
        row.forEach((cell, colIndex) => {
            if (cell === 1) {
                // å‰µå»ºå¤©ç‡ˆ
                const lantern = document.createElement("div");
                lantern.classList.add("sky-lantern");

                // è¨­ç½®åˆå§‹ä½ç½®ï¼ˆéš¨æ©Ÿæ°´å¹³ï¼Œå¾ç•«é¢åº•éƒ¨ï¼‰
                lantern.style.left = `${Math.random() * window.innerWidth}px`;
                lantern.style.top = `${window.innerHeight}px`;

                // æ·»åŠ åˆ°å®¹å™¨
                container.appendChild(lantern);

                // è¨ˆç®—ç›®æ¨™ä½ç½®
                const targetX = colIndex * gridSize + pinganOffsetX;
                const targetY = rowIndex * gridSize + pinganOffsetY - 230;

                // å»¶é²ä¸€æ®µæ™‚é–“è®“å¤©ç‡ˆç§»å‹•åˆ°ç›®æ¨™ä½ç½®
                setTimeout(() => {
                    lantern.style.transition = `all ${animationDuration / 1000}s ease-out`;
                    lantern.style.left = `${targetX}px`;
                    lantern.style.top = `${targetY}px`;
                }, 500);

                // è¨­ç½®10ç§’å¾Œéš±è—å¤©ç‡ˆ
                setTimeout(() => {
                    lantern.style.transition = `opacity 1s ease-out`;
                    lantern.style.opacity = "0";

                    // 10ç§’å¾Œç§»é™¤å¤©ç‡ˆ
                    setTimeout(() => {
                        lantern.remove();
                    }, 1000);
                }, displayDuration);
            }
        });
    });

    // å‰µå»ºã€Œå®‰ã€å­—çš„å¤©ç‡ˆ
    anShape.forEach((row, rowIndex) => {
        row.forEach((cell, colIndex) => {
            if (cell === 1) {
                // å‰µå»ºå¤©ç‡ˆ
                const lantern = document.createElement("div");
                lantern.classList.add("sky-lantern");

                // è¨­ç½®åˆå§‹ä½ç½®ï¼ˆéš¨æ©Ÿæ°´å¹³ï¼Œå¾ç•«é¢åº•éƒ¨ï¼‰
                lantern.style.left = `${Math.random() * window.innerWidth}px`;
                lantern.style.top = `${window.innerHeight}px`;

                // æ·»åŠ åˆ°å®¹å™¨
                container.appendChild(lantern);

                // è¨ˆç®—ç›®æ¨™ä½ç½®
                const targetX = colIndex * gridSize + anOffsetX;
                const targetY = rowIndex * gridSize + anOffsetY - 230;

                // å»¶é²ä¸€æ®µæ™‚é–“è®“å¤©ç‡ˆç§»å‹•åˆ°ç›®æ¨™ä½ç½®
                setTimeout(() => {
                    lantern.style.transition = `all ${animationDuration / 1000}s ease-out`;
                    lantern.style.left = `${targetX}px`;
                    lantern.style.top = `${targetY}px`;
                }, 500);

                // è¨­ç½®10ç§’å¾Œéš±è—å¤©ç‡ˆ
                setTimeout(() => {
                    lantern.style.transition = `opacity 1s ease-out`;
                    lantern.style.opacity = "0";

                    // 10ç§’å¾Œç§»é™¤å¤©ç‡ˆ
                    setTimeout(() => {
                        lantern.remove();
                    }, 1000);
                }, displayDuration);
            }
        });
    });
}

// é»æ“ŠæŒ‰éˆ•è§¸ç™¼å¤©ç‡ˆæ•ˆæœ
document.getElementById("wish-button").addEventListener("click", launchSkyLanterns);

    </script>
</body>
</html>
